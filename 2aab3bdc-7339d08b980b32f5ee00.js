(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{ON9X:function(r,e,t){!function(r,e,t,a){"use strict";var n,o=t.defineWorkerModule({name:"Typr Font Parser",dependencies:[function(){var r=self,e={parse:function(r){var t=e._bin,a=new Uint8Array(r);if("ttcf"==t.readASCII(a,0,4)){var n=4;t.readUshort(a,n),n+=2,t.readUshort(a,n),n+=2;var o=t.readUint(a,n);n+=4;for(var i=[],s=0;s<o;s++){var h=t.readUint(a,n);n+=4,i.push(e._readFont(a,h))}return i}return[e._readFont(a,0)]},_readFont:function(r,t){var a=e._bin,n=t;a.readFixed(r,t),t+=4;var o=a.readUshort(r,t);t+=2,a.readUshort(r,t),t+=2,a.readUshort(r,t),t+=2,a.readUshort(r,t),t+=2;for(var i=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],s={_data:r,_offset:n},h={},f=0;f<o;f++){var u=a.readASCII(r,t,4);t+=4,a.readUint(r,t),t+=4;var l=a.readUint(r,t);t+=4;var d=a.readUint(r,t);t+=4,h[u]={offset:l,length:d}}for(f=0;f<i.length;f++){var c=i[f];h[c]&&(s[c.trim()]=e[c.trim()].parse(r,h[c].offset,h[c].length,s))}return s},_tabOffset:function(r,t,a){for(var n=e._bin,o=n.readUshort(r,a+4),i=a+12,s=0;s<o;s++){var h=n.readASCII(r,i,4);i+=4,n.readUint(r,i),i+=4;var f=n.readUint(r,i);if(i+=4,n.readUint(r,i),i+=4,h==t)return f}return 0}};return e._bin={readFixed:function(r,e){return(r[e]<<8|r[e+1])+(r[e+2]<<8|r[e+3])/65540},readF2dot14:function(r,t){return e._bin.readShort(r,t)/16384},readInt:function(r,t){var a=e._bin.t.uint8;return a[0]=r[t+3],a[1]=r[t+2],a[2]=r[t+1],a[3]=r[t],e._bin.t.int32[0]},readInt8:function(r,t){return e._bin.t.uint8[0]=r[t],e._bin.t.int8[0]},readShort:function(r,t){var a=e._bin.t.uint8;return a[1]=r[t],a[0]=r[t+1],e._bin.t.int16[0]},readUshort:function(r,e){return r[e]<<8|r[e+1]},readUshorts:function(r,t,a){for(var n=[],o=0;o<a;o++)n.push(e._bin.readUshort(r,t+2*o));return n},readUint:function(r,t){var a=e._bin.t.uint8;return a[3]=r[t],a[2]=r[t+1],a[1]=r[t+2],a[0]=r[t+3],e._bin.t.uint32[0]},readUint64:function(r,t){return 4294967296*e._bin.readUint(r,t)+e._bin.readUint(r,t+4)},readASCII:function(r,e,t){for(var a="",n=0;n<t;n++)a+=String.fromCharCode(r[e+n]);return a},readUnicode:function(r,e,t){for(var a="",n=0;n<t;n++){var o=r[e++]<<8|r[e++];a+=String.fromCharCode(o)}return a},_tdec:r.TextDecoder?new r.TextDecoder:null,readUTF8:function(r,t,a){var n=e._bin._tdec;return n&&0==t&&a==r.length?n.decode(r):e._bin.readASCII(r,t,a)},readBytes:function(r,e,t){for(var a=[],n=0;n<t;n++)a.push(r[e+n]);return a},readASCIIArray:function(r,e,t){for(var a=[],n=0;n<t;n++)a.push(String.fromCharCode(r[e+n]));return a}},e._bin.t={buff:new ArrayBuffer(8)},e._bin.t.int8=new Int8Array(e._bin.t.buff),e._bin.t.uint8=new Uint8Array(e._bin.t.buff),e._bin.t.int16=new Int16Array(e._bin.t.buff),e._bin.t.uint16=new Uint16Array(e._bin.t.buff),e._bin.t.int32=new Int32Array(e._bin.t.buff),e._bin.t.uint32=new Uint32Array(e._bin.t.buff),e._lctf={},e._lctf.parse=function(r,t,a,n,o){var i=e._bin,s={},h=t;i.readFixed(r,t),t+=4;var f=i.readUshort(r,t);t+=2;var u=i.readUshort(r,t);t+=2;var l=i.readUshort(r,t);return t+=2,s.scriptList=e._lctf.readScriptList(r,h+f),s.featureList=e._lctf.readFeatureList(r,h+u),s.lookupList=e._lctf.readLookupList(r,h+l,o),s},e._lctf.readLookupList=function(r,t,a){var n=e._bin,o=t,i=[],s=n.readUshort(r,t);t+=2;for(var h=0;h<s;h++){var f=n.readUshort(r,t);t+=2;var u=e._lctf.readLookupTable(r,o+f,a);i.push(u)}return i},e._lctf.readLookupTable=function(r,t,a){var n=e._bin,o=t,i={tabs:[]};i.ltype=n.readUshort(r,t),t+=2,i.flag=n.readUshort(r,t),t+=2;var s=n.readUshort(r,t);t+=2;for(var h=0;h<s;h++){var f=n.readUshort(r,t);t+=2;var u=a(r,i.ltype,o+f);i.tabs.push(u)}return i},e._lctf.numOfOnes=function(r){for(var e=0,t=0;t<32;t++)0!=(r>>>t&1)&&e++;return e},e._lctf.readClassDef=function(r,t){var a=e._bin,n=[],o=a.readUshort(r,t);if(t+=2,1==o){var i=a.readUshort(r,t);t+=2;var s=a.readUshort(r,t);t+=2;for(var h=0;h<s;h++)n.push(i+h),n.push(i+h),n.push(a.readUshort(r,t)),t+=2}if(2==o){var f=a.readUshort(r,t);for(t+=2,h=0;h<f;h++)n.push(a.readUshort(r,t)),t+=2,n.push(a.readUshort(r,t)),t+=2,n.push(a.readUshort(r,t)),t+=2}return n},e._lctf.getInterval=function(r,e){for(var t=0;t<r.length;t+=3){var a=r[t],n=r[t+1];if(r[t+2],a<=e&&e<=n)return t}return-1},e._lctf.readCoverage=function(r,t){var a=e._bin,n={};n.fmt=a.readUshort(r,t),t+=2;var o=a.readUshort(r,t);return t+=2,1==n.fmt&&(n.tab=a.readUshorts(r,t,o)),2==n.fmt&&(n.tab=a.readUshorts(r,t,3*o)),n},e._lctf.coverageIndex=function(r,t){var a=r.tab;if(1==r.fmt)return a.indexOf(t);if(2==r.fmt){var n=e._lctf.getInterval(a,t);if(-1!=n)return a[n+2]+(t-a[n])}return-1},e._lctf.readFeatureList=function(r,t){var a=e._bin,n=t,o=[],i=a.readUshort(r,t);t+=2;for(var s=0;s<i;s++){var h=a.readASCII(r,t,4);t+=4;var f=a.readUshort(r,t);t+=2,o.push({tag:h.trim(),tab:e._lctf.readFeatureTable(r,n+f)})}return o},e._lctf.readFeatureTable=function(r,t){var a=e._bin;a.readUshort(r,t),t+=2;var n=a.readUshort(r,t);t+=2;for(var o=[],i=0;i<n;i++)o.push(a.readUshort(r,t+2*i));return o},e._lctf.readScriptList=function(r,t){var a=e._bin,n=t,o={},i=a.readUshort(r,t);t+=2;for(var s=0;s<i;s++){var h=a.readASCII(r,t,4);t+=4;var f=a.readUshort(r,t);t+=2,o[h.trim()]=e._lctf.readScriptTable(r,n+f)}return o},e._lctf.readScriptTable=function(r,t){var a=e._bin,n=t,o={},i=a.readUshort(r,t);t+=2,o.default=e._lctf.readLangSysTable(r,n+i);var s=a.readUshort(r,t);t+=2;for(var h=0;h<s;h++){var f=a.readASCII(r,t,4);t+=4;var u=a.readUshort(r,t);t+=2,o[f.trim()]=e._lctf.readLangSysTable(r,n+u)}return o},e._lctf.readLangSysTable=function(r,t){var a=e._bin,n={};a.readUshort(r,t),t+=2,n.reqFeature=a.readUshort(r,t),t+=2;var o=a.readUshort(r,t);return t+=2,n.features=a.readUshorts(r,t,o),n},e.CFF={},e.CFF.parse=function(r,t,a){var n=e._bin;(r=new Uint8Array(r.buffer,t,a))[t=0],r[++t],r[++t],r[++t],t++;var o=[];t=e.CFF.readIndex(r,t,o);for(var i=[],s=0;s<o.length-1;s++)i.push(n.readASCII(r,t+o[s],o[s+1]-o[s]));t+=o[o.length-1];var h=[];t=e.CFF.readIndex(r,t,h);var f=[];for(s=0;s<h.length-1;s++)f.push(e.CFF.readDict(r,t+h[s],t+h[s+1]));t+=h[h.length-1];var u=f[0],l=[];t=e.CFF.readIndex(r,t,l);var d=[];for(s=0;s<l.length-1;s++)d.push(n.readASCII(r,t+l[s],l[s+1]-l[s]));if(t+=l[l.length-1],e.CFF.readSubrs(r,t,u),u.CharStrings){t=u.CharStrings,l=[],t=e.CFF.readIndex(r,t,l);var c=[];for(s=0;s<l.length-1;s++)c.push(n.readBytes(r,t+l[s],l[s+1]-l[s]));u.CharStrings=c}if(u.ROS){t=u.FDArray;var p=[];for(t=e.CFF.readIndex(r,t,p),u.FDArray=[],s=0;s<p.length-1;s++){var v=e.CFF.readDict(r,t+p[s],t+p[s+1]);e.CFF._readFDict(r,v,d),u.FDArray.push(v)}t+=p[p.length-1],t=u.FDSelect,u.FDSelect=[];var g=r[t];if(t++,3!=g)throw g;var y=n.readUshort(r,t);for(t+=2,s=0;s<y+1;s++)u.FDSelect.push(n.readUshort(r,t),r[t+2]),t+=3}return u.Encoding&&(u.Encoding=e.CFF.readEncoding(r,u.Encoding,u.CharStrings.length)),u.charset&&(u.charset=e.CFF.readCharset(r,u.charset,u.CharStrings.length)),e.CFF._readFDict(r,u,d),u},e.CFF._readFDict=function(r,t,a){var n;for(var o in t.Private&&(n=t.Private[1],t.Private=e.CFF.readDict(r,n,n+t.Private[0]),t.Private.Subrs&&e.CFF.readSubrs(r,n+t.Private.Subrs,t.Private)),t)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)&&(t[o]=a[t[o]-426+35])},e.CFF.readSubrs=function(r,t,a){var n=e._bin,o=[];t=e.CFF.readIndex(r,t,o);var i,s=o.length;i=s<1240?107:s<33900?1131:32768,a.Bias=i,a.Subrs=[];for(var h=0;h<o.length-1;h++)a.Subrs.push(n.readBytes(r,t+o[h],o[h+1]-o[h]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,e){for(var t=0;t<r.charset.length;t++)if(r.charset[t]==e)return t;return-1},e.CFF.glyphBySE=function(r,t){return t<0||t>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[t])},e.CFF.readEncoding=function(r,t,a){e._bin;var n=[".notdef"],o=r[t];if(t++,0!=o)throw"error: unknown encoding format: "+o;var i=r[t];t++;for(var s=0;s<i;s++)n.push(r[t+s]);return n},e.CFF.readCharset=function(r,t,a){var n=e._bin,o=[".notdef"],i=r[t];if(t++,0==i)for(var s=0;s<a;s++){var h=n.readUshort(r,t);t+=2,o.push(h)}else{if(1!=i&&2!=i)throw"error: format: "+i;for(;o.length<a;){h=n.readUshort(r,t),t+=2;var f=0;for(1==i?(f=r[t],t++):(f=n.readUshort(r,t),t+=2),s=0;s<=f;s++)o.push(h),h++}}return o},e.CFF.readIndex=function(r,t,a){var n=e._bin,o=n.readUshort(r,t)+1,i=r[t+=2];if(t++,1==i)for(var s=0;s<o;s++)a.push(r[t+s]);else if(2==i)for(s=0;s<o;s++)a.push(n.readUshort(r,t+2*s));else if(3==i)for(s=0;s<o;s++)a.push(16777215&n.readUint(r,t+3*s-1));else if(1!=o)throw"unsupported offset size: "+i+", count: "+o;return(t+=o*i)-1},e.CFF.getCharString=function(r,t,a){var n=e._bin,o=r[t],i=r[t+1],s=(r[t+2],r[t+3],r[t+4],1),h=null,f=null;o<=20&&(h=o,s=1),12==o&&(h=100*o+i,s=2),21<=o&&o<=27&&(h=o,s=1),28==o&&(f=n.readShort(r,t+1),s=3),29<=o&&o<=31&&(h=o,s=1),32<=o&&o<=246&&(f=o-139,s=1),247<=o&&o<=250&&(f=256*(o-247)+i+108,s=2),251<=o&&o<=254&&(f=256*-(o-251)-i-108,s=2),255==o&&(f=n.readInt(r,t+1)/65535,s=5),a.val=null!=f?f:"o"+h,a.size=s},e.CFF.readCharString=function(r,t,a){for(var n=t+a,o=e._bin,i=[];t<n;){var s=r[t],h=r[t+1],f=(r[t+2],r[t+3],r[t+4],1),u=null,l=null;s<=20&&(u=s,f=1),12==s&&(u=100*s+h,f=2),19!=s&&20!=s||(u=s,f=2),21<=s&&s<=27&&(u=s,f=1),28==s&&(l=o.readShort(r,t+1),f=3),29<=s&&s<=31&&(u=s,f=1),32<=s&&s<=246&&(l=s-139,f=1),247<=s&&s<=250&&(l=256*(s-247)+h+108,f=2),251<=s&&s<=254&&(l=256*-(s-251)-h-108,f=2),255==s&&(l=o.readInt(r,t+1)/65535,f=5),i.push(null!=l?l:"o"+u),t+=f}return i},e.CFF.readDict=function(r,t,a){for(var n=e._bin,o={},i=[];t<a;){var s=r[t],h=r[t+1],f=(r[t+2],r[t+3],r[t+4],1),u=null,l=null;if(28==s&&(l=n.readShort(r,t+1),f=3),29==s&&(l=n.readInt(r,t+1),f=5),32<=s&&s<=246&&(l=s-139,f=1),247<=s&&s<=250&&(l=256*(s-247)+h+108,f=2),251<=s&&s<=254&&(l=256*-(s-251)-h-108,f=2),255==s)throw l=n.readInt(r,t+1)/65535,f=5,"unknown number";if(30==s){var d=[];for(f=1;;){var c=r[t+f];f++;var p=c>>4,v=15&c;if(15!=p&&d.push(p),15!=v&&d.push(v),15==v)break}for(var g="",y=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],m=0;m<d.length;m++)g+=y[d[m]];l=parseFloat(g)}s<=21&&(u=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],f=1,12==s&&(u=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][h],f=2)),null!=u?(o[u]=1==i.length?i[0]:i,i=[]):i.push(l),t+=f}return o},e.cmap={},e.cmap.parse=function(r,t,a){r=new Uint8Array(r.buffer,t,a),t=0;var n=e._bin,o={};n.readUshort(r,t),t+=2;var i=n.readUshort(r,t);t+=2;var s=[];o.tables=[];for(var h=0;h<i;h++){var f=n.readUshort(r,t);t+=2;var u=n.readUshort(r,t);t+=2;var l=n.readUint(r,t);t+=4;var d="p"+f+"e"+u,c=s.indexOf(l);if(-1==c){var p;c=o.tables.length,s.push(l);var v=n.readUshort(r,l);0==v?p=e.cmap.parse0(r,l):4==v?p=e.cmap.parse4(r,l):6==v?p=e.cmap.parse6(r,l):12==v?p=e.cmap.parse12(r,l):console.log("unknown format: "+v,f,u,l),o.tables.push(p)}if(null!=o[d])throw"multiple tables for one platform+encoding";o[d]=c}return o},e.cmap.parse0=function(r,t){var a=e._bin,n={};n.format=a.readUshort(r,t),t+=2;var o=a.readUshort(r,t);t+=2,a.readUshort(r,t),t+=2,n.map=[];for(var i=0;i<o-6;i++)n.map.push(r[t+i]);return n},e.cmap.parse4=function(r,t){var a=e._bin,n=t,o={};o.format=a.readUshort(r,t),t+=2;var i=a.readUshort(r,t);t+=2,a.readUshort(r,t),t+=2;var s=a.readUshort(r,t);t+=2;var h=s/2;o.searchRange=a.readUshort(r,t),t+=2,o.entrySelector=a.readUshort(r,t),t+=2,o.rangeShift=a.readUshort(r,t),t+=2,o.endCount=a.readUshorts(r,t,h),t+=2*h,t+=2,o.startCount=a.readUshorts(r,t,h),t+=2*h,o.idDelta=[];for(var f=0;f<h;f++)o.idDelta.push(a.readShort(r,t)),t+=2;for(o.idRangeOffset=a.readUshorts(r,t,h),t+=2*h,o.glyphIdArray=[];t<n+i;)o.glyphIdArray.push(a.readUshort(r,t)),t+=2;return o},e.cmap.parse6=function(r,t){var a=e._bin,n={};n.format=a.readUshort(r,t),t+=2,a.readUshort(r,t),t+=2,a.readUshort(r,t),t+=2,n.firstCode=a.readUshort(r,t),t+=2;var o=a.readUshort(r,t);t+=2,n.glyphIdArray=[];for(var i=0;i<o;i++)n.glyphIdArray.push(a.readUshort(r,t)),t+=2;return n},e.cmap.parse12=function(r,t){var a=e._bin,n={};n.format=a.readUshort(r,t),t+=2,t+=2,a.readUint(r,t),t+=4,a.readUint(r,t),t+=4;var o=a.readUint(r,t);t+=4,n.groups=[];for(var i=0;i<o;i++){var s=t+12*i,h=a.readUint(r,s+0),f=a.readUint(r,s+4),u=a.readUint(r,s+8);n.groups.push([h,f,u])}return n},e.glyf={},e.glyf.parse=function(r,e,t,a){for(var n=[],o=0;o<a.maxp.numGlyphs;o++)n.push(null);return n},e.glyf._parseGlyf=function(r,t){var a=e._bin,n=r._data,o=e._tabOffset(n,"glyf",r._offset)+r.loca[t];if(r.loca[t]==r.loca[t+1])return null;var i={};if(i.noc=a.readShort(n,o),o+=2,i.xMin=a.readShort(n,o),o+=2,i.yMin=a.readShort(n,o),o+=2,i.xMax=a.readShort(n,o),o+=2,i.yMax=a.readShort(n,o),o+=2,i.xMin>=i.xMax||i.yMin>=i.yMax)return null;if(i.noc>0){i.endPts=[];for(var s=0;s<i.noc;s++)i.endPts.push(a.readUshort(n,o)),o+=2;var h=a.readUshort(n,o);if(o+=2,n.length-o<h)return null;i.instructions=a.readBytes(n,o,h),o+=h;var f=i.endPts[i.noc-1]+1;for(i.flags=[],s=0;s<f;s++){var u=n[o];if(o++,i.flags.push(u),0!=(8&u)){var l=n[o];o++;for(var d=0;d<l;d++)i.flags.push(u),s++}}for(i.xs=[],s=0;s<f;s++){var c=0!=(2&i.flags[s]),p=0!=(16&i.flags[s]);c?(i.xs.push(p?n[o]:-n[o]),o++):p?i.xs.push(0):(i.xs.push(a.readShort(n,o)),o+=2)}for(i.ys=[],s=0;s<f;s++)c=0!=(4&i.flags[s]),p=0!=(32&i.flags[s]),c?(i.ys.push(p?n[o]:-n[o]),o++):p?i.ys.push(0):(i.ys.push(a.readShort(n,o)),o+=2);var v=0,g=0;for(s=0;s<f;s++)v+=i.xs[s],g+=i.ys[s],i.xs[s]=v,i.ys[s]=g}else{var y;i.parts=[];do{y=a.readUshort(n,o),o+=2;var m={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(i.parts.push(m),m.glyphIndex=a.readUshort(n,o),o+=2,1&y){var U=a.readShort(n,o);o+=2;var S=a.readShort(n,o);o+=2}else U=a.readInt8(n,o),o++,S=a.readInt8(n,o),o++;2&y?(m.m.tx=U,m.m.ty=S):(m.p1=U,m.p2=S),8&y?(m.m.a=m.m.d=a.readF2dot14(n,o),o+=2):64&y?(m.m.a=a.readF2dot14(n,o),o+=2,m.m.d=a.readF2dot14(n,o),o+=2):128&y&&(m.m.a=a.readF2dot14(n,o),o+=2,m.m.b=a.readF2dot14(n,o),o+=2,m.m.c=a.readF2dot14(n,o),o+=2,m.m.d=a.readF2dot14(n,o),o+=2)}while(32&y);if(256&y){var x=a.readUshort(n,o);for(o+=2,i.instr=[],s=0;s<x;s++)i.instr.push(n[o]),o++}}return i},e.GPOS={},e.GPOS.parse=function(r,t,a,n){return e._lctf.parse(r,t,a,n,e.GPOS.subt)},e.GPOS.subt=function(r,t,a){var n=e._bin,o=a,i={};if(i.fmt=n.readUshort(r,a),a+=2,1==t||2==t||3==t||7==t||8==t&&i.fmt<=2){var s=n.readUshort(r,a);a+=2,i.coverage=e._lctf.readCoverage(r,s+o)}if(1==t&&1==i.fmt){var h=n.readUshort(r,a);a+=2;var f=e._lctf.numOfOnes(h);0!=h&&(i.pos=e.GPOS.readValueRecord(r,a,h))}else if(2==t){h=n.readUshort(r,a),a+=2;var u=n.readUshort(r,a);a+=2,f=e._lctf.numOfOnes(h);var l=e._lctf.numOfOnes(u);if(1==i.fmt){i.pairsets=[];var d=n.readUshort(r,a);a+=2;for(var c=0;c<d;c++){var p=o+n.readUshort(r,a);a+=2;var v=n.readUshort(r,p);p+=2;for(var g=[],y=0;y<v;y++){var m=n.readUshort(r,p);p+=2,0!=h&&(_=e.GPOS.readValueRecord(r,p,h),p+=2*f),0!=u&&(C=e.GPOS.readValueRecord(r,p,u),p+=2*l),g.push({gid2:m,val1:_,val2:C})}i.pairsets.push(g)}}if(2==i.fmt){var U=n.readUshort(r,a);a+=2;var S=n.readUshort(r,a);a+=2;var x=n.readUshort(r,a);a+=2;var b=n.readUshort(r,a);for(a+=2,i.classDef1=e._lctf.readClassDef(r,o+U),i.classDef2=e._lctf.readClassDef(r,o+S),i.matrix=[],c=0;c<x;c++){var F=[];for(y=0;y<b;y++){var _=null,C=null;0!=i.valFmt1&&(_=e.GPOS.readValueRecord(r,a,i.valFmt1),a+=2*f),0!=i.valFmt2&&(C=e.GPOS.readValueRecord(r,a,i.valFmt2),a+=2*l),F.push({val1:_,val2:C})}i.matrix.push(F)}}}return i},e.GPOS.readValueRecord=function(r,t,a){var n=e._bin,o=[];return o.push(1&a?n.readShort(r,t):0),t+=1&a?2:0,o.push(2&a?n.readShort(r,t):0),t+=2&a?2:0,o.push(4&a?n.readShort(r,t):0),t+=4&a?2:0,o.push(8&a?n.readShort(r,t):0),t+=8&a?2:0,o},e.GSUB={},e.GSUB.parse=function(r,t,a,n){return e._lctf.parse(r,t,a,n,e.GSUB.subt)},e.GSUB.subt=function(r,t,a){var n=e._bin,o=a,i={};if(i.fmt=n.readUshort(r,a),a+=2,1!=t&&4!=t&&5!=t&&6!=t)return null;if(1==t||4==t||5==t&&i.fmt<=2||6==t&&i.fmt<=2){var s=n.readUshort(r,a);a+=2,i.coverage=e._lctf.readCoverage(r,o+s)}if(1==t){if(1==i.fmt)i.delta=n.readShort(r,a),a+=2;else if(2==i.fmt){var h=n.readUshort(r,a);a+=2,i.newg=n.readUshorts(r,a,h),a+=2*i.newg.length}}else if(4==t){i.vals=[],h=n.readUshort(r,a),a+=2;for(var f=0;f<h;f++){var u=n.readUshort(r,a);a+=2,i.vals.push(e.GSUB.readLigatureSet(r,o+u))}}else if(5==t){if(2==i.fmt){var l=n.readUshort(r,a);a+=2,i.cDef=e._lctf.readClassDef(r,o+l),i.scset=[];var d=n.readUshort(r,a);for(a+=2,f=0;f<d;f++){var c=n.readUshort(r,a);a+=2,i.scset.push(0==c?null:e.GSUB.readSubClassSet(r,o+c))}}}else if(6==t&&3==i.fmt){for(f=0;f<3;f++){h=n.readUshort(r,a),a+=2;for(var p=[],v=0;v<h;v++)p.push(e._lctf.readCoverage(r,o+n.readUshort(r,a+2*v)));a+=2*h,0==f&&(i.backCvg=p),1==f&&(i.inptCvg=p),2==f&&(i.ahedCvg=p)}h=n.readUshort(r,a),a+=2,i.lookupRec=e.GSUB.readSubstLookupRecords(r,a,h)}return i},e.GSUB.readSubClassSet=function(r,t){var a=e._bin.readUshort,n=t,o=[],i=a(r,t);t+=2;for(var s=0;s<i;s++){var h=a(r,t);t+=2,o.push(e.GSUB.readSubClassRule(r,n+h))}return o},e.GSUB.readSubClassRule=function(r,t){var a=e._bin.readUshort,n={},o=a(r,t),i=a(r,t+=2);t+=2,n.input=[];for(var s=0;s<o-1;s++)n.input.push(a(r,t)),t+=2;return n.substLookupRecords=e.GSUB.readSubstLookupRecords(r,t,i),n},e.GSUB.readSubstLookupRecords=function(r,t,a){for(var n=e._bin.readUshort,o=[],i=0;i<a;i++)o.push(n(r,t),n(r,t+2)),t+=4;return o},e.GSUB.readChainSubClassSet=function(r,t){var a=e._bin,n=t,o=[],i=a.readUshort(r,t);t+=2;for(var s=0;s<i;s++){var h=a.readUshort(r,t);t+=2,o.push(e.GSUB.readChainSubClassRule(r,n+h))}return o},e.GSUB.readChainSubClassRule=function(r,t){for(var a=e._bin,n={},o=["backtrack","input","lookahead"],i=0;i<o.length;i++){var s=a.readUshort(r,t);t+=2,1==i&&s--,n[o[i]]=a.readUshorts(r,t,s),t+=2*n[o[i]].length}return s=a.readUshort(r,t),t+=2,n.subst=a.readUshorts(r,t,2*s),t+=2*n.subst.length,n},e.GSUB.readLigatureSet=function(r,t){var a=e._bin,n=t,o=[],i=a.readUshort(r,t);t+=2;for(var s=0;s<i;s++){var h=a.readUshort(r,t);t+=2,o.push(e.GSUB.readLigature(r,n+h))}return o},e.GSUB.readLigature=function(r,t){var a=e._bin,n={chain:[]};n.nglyph=a.readUshort(r,t),t+=2;var o=a.readUshort(r,t);t+=2;for(var i=0;i<o-1;i++)n.chain.push(a.readUshort(r,t)),t+=2;return n},e.head={},e.head.parse=function(r,t,a){var n=e._bin,o={};return n.readFixed(r,t),t+=4,o.fontRevision=n.readFixed(r,t),t+=4,n.readUint(r,t),t+=4,n.readUint(r,t),t+=4,o.flags=n.readUshort(r,t),t+=2,o.unitsPerEm=n.readUshort(r,t),t+=2,o.created=n.readUint64(r,t),t+=8,o.modified=n.readUint64(r,t),t+=8,o.xMin=n.readShort(r,t),t+=2,o.yMin=n.readShort(r,t),t+=2,o.xMax=n.readShort(r,t),t+=2,o.yMax=n.readShort(r,t),t+=2,o.macStyle=n.readUshort(r,t),t+=2,o.lowestRecPPEM=n.readUshort(r,t),t+=2,o.fontDirectionHint=n.readShort(r,t),t+=2,o.indexToLocFormat=n.readShort(r,t),t+=2,o.glyphDataFormat=n.readShort(r,t),t+=2,o},e.hhea={},e.hhea.parse=function(r,t,a){var n=e._bin,o={};return n.readFixed(r,t),t+=4,o.ascender=n.readShort(r,t),t+=2,o.descender=n.readShort(r,t),t+=2,o.lineGap=n.readShort(r,t),t+=2,o.advanceWidthMax=n.readUshort(r,t),t+=2,o.minLeftSideBearing=n.readShort(r,t),t+=2,o.minRightSideBearing=n.readShort(r,t),t+=2,o.xMaxExtent=n.readShort(r,t),t+=2,o.caretSlopeRise=n.readShort(r,t),t+=2,o.caretSlopeRun=n.readShort(r,t),t+=2,o.caretOffset=n.readShort(r,t),t+=2,t+=8,o.metricDataFormat=n.readShort(r,t),t+=2,o.numberOfHMetrics=n.readUshort(r,t),t+=2,o},e.hmtx={},e.hmtx.parse=function(r,t,a,n){for(var o=e._bin,i={aWidth:[],lsBearing:[]},s=0,h=0,f=0;f<n.maxp.numGlyphs;f++)f<n.hhea.numberOfHMetrics&&(s=o.readUshort(r,t),t+=2,h=o.readShort(r,t),t+=2),i.aWidth.push(s),i.lsBearing.push(h);return i},e.kern={},e.kern.parse=function(r,t,a,n){var o=e._bin,i=o.readUshort(r,t);if(t+=2,1==i)return e.kern.parseV1(r,t-2,a,n);var s=o.readUshort(r,t);t+=2;for(var h={glyph1:[],rval:[]},f=0;f<s;f++){t+=2,a=o.readUshort(r,t),t+=2;var u=o.readUshort(r,t);t+=2;var l=u>>>8;if(0!=(l&=15))throw"unknown kern table format: "+l;t=e.kern.readFormat0(r,t,h)}return h},e.kern.parseV1=function(r,t,a,n){var o=e._bin;o.readFixed(r,t),t+=4;var i=o.readUint(r,t);t+=4;for(var s={glyph1:[],rval:[]},h=0;h<i;h++){o.readUint(r,t),t+=4;var f=o.readUshort(r,t);t+=2,o.readUshort(r,t),t+=2;var u=f>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;t=e.kern.readFormat0(r,t,s)}return s},e.kern.readFormat0=function(r,t,a){var n=e._bin,o=-1,i=n.readUshort(r,t);t+=2,n.readUshort(r,t),t+=2,n.readUshort(r,t),t+=2,n.readUshort(r,t),t+=2;for(var s=0;s<i;s++){var h=n.readUshort(r,t);t+=2;var f=n.readUshort(r,t);t+=2;var u=n.readShort(r,t);t+=2,h!=o&&(a.glyph1.push(h),a.rval.push({glyph2:[],vals:[]}));var l=a.rval[a.rval.length-1];l.glyph2.push(f),l.vals.push(u),o=h}return t},e.loca={},e.loca.parse=function(r,t,a,n){var o=e._bin,i=[],s=n.head.indexToLocFormat,h=n.maxp.numGlyphs+1;if(0==s)for(var f=0;f<h;f++)i.push(o.readUshort(r,t+(f<<1))<<1);if(1==s)for(f=0;f<h;f++)i.push(o.readUint(r,t+(f<<2)));return i},e.maxp={},e.maxp.parse=function(r,t,a){var n=e._bin,o={},i=n.readUint(r,t);return t+=4,o.numGlyphs=n.readUshort(r,t),t+=2,65536==i&&(o.maxPoints=n.readUshort(r,t),t+=2,o.maxContours=n.readUshort(r,t),t+=2,o.maxCompositePoints=n.readUshort(r,t),t+=2,o.maxCompositeContours=n.readUshort(r,t),t+=2,o.maxZones=n.readUshort(r,t),t+=2,o.maxTwilightPoints=n.readUshort(r,t),t+=2,o.maxStorage=n.readUshort(r,t),t+=2,o.maxFunctionDefs=n.readUshort(r,t),t+=2,o.maxInstructionDefs=n.readUshort(r,t),t+=2,o.maxStackElements=n.readUshort(r,t),t+=2,o.maxSizeOfInstructions=n.readUshort(r,t),t+=2,o.maxComponentElements=n.readUshort(r,t),t+=2,o.maxComponentDepth=n.readUshort(r,t),t+=2),o},e.name={},e.name.parse=function(r,t,a){var n=e._bin,o={};n.readUshort(r,t),t+=2;var i=n.readUshort(r,t);t+=2,n.readUshort(r,t);for(var s,h=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],f=t+=2,u=0;u<i;u++){var l=n.readUshort(r,t);t+=2;var d=n.readUshort(r,t);t+=2;var c=n.readUshort(r,t);t+=2;var p=n.readUshort(r,t);t+=2;var v=n.readUshort(r,t);t+=2;var g=n.readUshort(r,t);t+=2;var y,m=h[p],U=f+12*i+g;if(0==l)y=n.readUnicode(r,U,v/2);else if(3==l&&0==d)y=n.readUnicode(r,U,v/2);else if(0==d)y=n.readASCII(r,U,v);else if(1==d)y=n.readUnicode(r,U,v/2);else if(3==d)y=n.readUnicode(r,U,v/2);else{if(1!=l)throw"unknown encoding "+d+", platformID: "+l;y=n.readASCII(r,U,v),console.log("reading unknown MAC encoding "+d+" as ASCII")}var S="p"+l+","+c.toString(16);null==o[S]&&(o[S]={}),o[S][m]=y,o[S]._lang=c}for(var x in o)if(null!=o[x].postScriptName&&1033==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName&&0==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName&&3084==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName)return o[x];for(var x in o){s=x;break}return console.log("returning name table with languageID "+o[s]._lang),o[s]},e["OS/2"]={},e["OS/2"].parse=function(r,t,a){var n=e._bin.readUshort(r,t);t+=2;var o={};if(0==n)e["OS/2"].version0(r,t,o);else if(1==n)e["OS/2"].version1(r,t,o);else if(2==n||3==n||4==n)e["OS/2"].version2(r,t,o);else{if(5!=n)throw"unknown OS/2 table version: "+n;e["OS/2"].version5(r,t,o)}return o},e["OS/2"].version0=function(r,t,a){var n=e._bin;return a.xAvgCharWidth=n.readShort(r,t),t+=2,a.usWeightClass=n.readUshort(r,t),t+=2,a.usWidthClass=n.readUshort(r,t),t+=2,a.fsType=n.readUshort(r,t),t+=2,a.ySubscriptXSize=n.readShort(r,t),t+=2,a.ySubscriptYSize=n.readShort(r,t),t+=2,a.ySubscriptXOffset=n.readShort(r,t),t+=2,a.ySubscriptYOffset=n.readShort(r,t),t+=2,a.ySuperscriptXSize=n.readShort(r,t),t+=2,a.ySuperscriptYSize=n.readShort(r,t),t+=2,a.ySuperscriptXOffset=n.readShort(r,t),t+=2,a.ySuperscriptYOffset=n.readShort(r,t),t+=2,a.yStrikeoutSize=n.readShort(r,t),t+=2,a.yStrikeoutPosition=n.readShort(r,t),t+=2,a.sFamilyClass=n.readShort(r,t),t+=2,a.panose=n.readBytes(r,t,10),t+=10,a.ulUnicodeRange1=n.readUint(r,t),t+=4,a.ulUnicodeRange2=n.readUint(r,t),t+=4,a.ulUnicodeRange3=n.readUint(r,t),t+=4,a.ulUnicodeRange4=n.readUint(r,t),t+=4,a.achVendID=[n.readInt8(r,t),n.readInt8(r,t+1),n.readInt8(r,t+2),n.readInt8(r,t+3)],t+=4,a.fsSelection=n.readUshort(r,t),t+=2,a.usFirstCharIndex=n.readUshort(r,t),t+=2,a.usLastCharIndex=n.readUshort(r,t),t+=2,a.sTypoAscender=n.readShort(r,t),t+=2,a.sTypoDescender=n.readShort(r,t),t+=2,a.sTypoLineGap=n.readShort(r,t),t+=2,a.usWinAscent=n.readUshort(r,t),t+=2,a.usWinDescent=n.readUshort(r,t),t+=2},e["OS/2"].version1=function(r,t,a){var n=e._bin;return t=e["OS/2"].version0(r,t,a),a.ulCodePageRange1=n.readUint(r,t),t+=4,a.ulCodePageRange2=n.readUint(r,t),t+=4},e["OS/2"].version2=function(r,t,a){var n=e._bin;return t=e["OS/2"].version1(r,t,a),a.sxHeight=n.readShort(r,t),t+=2,a.sCapHeight=n.readShort(r,t),t+=2,a.usDefault=n.readUshort(r,t),t+=2,a.usBreak=n.readUshort(r,t),t+=2,a.usMaxContext=n.readUshort(r,t),t+=2},e["OS/2"].version5=function(r,t,a){var n=e._bin;return t=e["OS/2"].version2(r,t,a),a.usLowerOpticalPointSize=n.readUshort(r,t),t+=2,a.usUpperOpticalPointSize=n.readUshort(r,t),t+=2},e.post={},e.post.parse=function(r,t,a){var n=e._bin,o={};return o.version=n.readFixed(r,t),t+=4,o.italicAngle=n.readFixed(r,t),t+=4,o.underlinePosition=n.readShort(r,t),t+=2,o.underlineThickness=n.readShort(r,t),t+=2,o},e.SVG={},e.SVG.parse=function(r,t,a){var n=e._bin,o={entries:[]},i=t;n.readUshort(r,t),t+=2;var s=n.readUint(r,t);t+=4,n.readUint(r,t),t+=4,t=s+i;var h=n.readUshort(r,t);t+=2;for(var f=0;f<h;f++){var u=n.readUshort(r,t);t+=2;var l=n.readUshort(r,t);t+=2;var d=n.readUint(r,t);t+=4;var c=n.readUint(r,t);t+=4;for(var p=new Uint8Array(r.buffer,i+d+s,c),v=n.readUTF8(p,0,p.length),g=u;g<=l;g++)o.entries[g]=v}return o},e.SVG.toPath=function(r){var t={cmds:[],crds:[]};if(null==r)return t;for(var a=(new DOMParser).parseFromString(r,"image/svg+xml").firstChild;"svg"!=a.tagName;)a=a.nextSibling;var n=a.getAttribute("viewBox");n=n?n.trim().split(" ").map(parseFloat):[0,0,1e3,1e3],e.SVG._toPath(a.children,t);for(var o=0;o<t.crds.length;o+=2){var i=t.crds[o],s=t.crds[o+1];i-=n[0],s=-(s-=n[1]),t.crds[o]=i,t.crds[o+1]=s}return t},e.SVG._toPath=function(r,t,a){for(var n=0;n<r.length;n++){var o=r[n],i=o.tagName,s=o.getAttribute("fill");if(null==s&&(s=a),"g"==i)e.SVG._toPath(o.children,t,s);else if("path"==i){t.cmds.push(s||"#000000");var h=o.getAttribute("d"),f=e.SVG._tokens(h);e.SVG._toksToPath(f,t),t.cmds.push("X")}else"defs"==i||console.log(i,o)}},e.SVG._tokens=function(r){for(var e=[],t=0,a=!1,n="";t<r.length;){var o=r.charCodeAt(t),i=r.charAt(t);t++;var s=48<=o&&o<=57||"."==i||"-"==i;a?"-"==i?(e.push(parseFloat(n)),n=i):s?n+=i:(e.push(parseFloat(n)),","!=i&&" "!=i&&e.push(i),a=!1):s?(n=i,a=!0):","!=i&&" "!=i&&e.push(i)}return a&&e.push(parseFloat(n)),e},e.SVG._toksToPath=function(r,t){for(var a=0,n=0,o=0,i=0,s=0,h={M:2,L:2,H:1,V:1,S:4,C:6},f=t.cmds,u=t.crds;a<r.length;){var l=r[a];if(a++,"z"==l)f.push("Z"),n=i,o=s;else for(var d=l.toUpperCase(),c=h[d],p=e.SVG._reps(r,a,c),v=0;v<p;v++){var g=0,y=0;if(l!=d&&(g=n,y=o),"M"==d)n=g+r[a++],o=y+r[a++],f.push("M"),u.push(n,o),i=n,s=o;else if("L"==d)n=g+r[a++],o=y+r[a++],f.push("L"),u.push(n,o);else if("H"==d)n=g+r[a++],f.push("L"),u.push(n,o);else if("V"==d)o=y+r[a++],f.push("L"),u.push(n,o);else if("C"==d){var m=g+r[a++],U=y+r[a++],S=g+r[a++],x=y+r[a++],b=g+r[a++],F=y+r[a++];f.push("C"),u.push(m,U,S,x,b,F),n=b,o=F}else if("S"==d){var _=Math.max(u.length-4,0);m=n+n-u[_],U=o+o-u[_+1],S=g+r[a++],x=y+r[a++],b=g+r[a++],F=y+r[a++],f.push("C"),u.push(m,U,S,x,b,F),n=b,o=F}else console.log("Unknown SVG command "+l)}}},e.SVG._reps=function(r,e,t){for(var a=e;a<r.length&&"string"!=typeof r[a];)a+=t;return(a-e)/t},null==e&&(e={}),null==e.U&&(e.U={}),e.U.codeToGlyph=function(r,e){var t=r.cmap,a=-1;if(null!=t.p0e4?a=t.p0e4:null!=t.p3e1?a=t.p3e1:null!=t.p1e0?a=t.p1e0:null!=t.p0e3&&(a=t.p0e3),-1==a)throw"no familiar platform and encoding!";var n=t.tables[a];if(0==n.format)return e>=n.map.length?0:n.map[e];if(4==n.format){for(var o=-1,i=0;i<n.endCount.length;i++)if(e<=n.endCount[i]){o=i;break}return-1==o||n.startCount[o]>e?0:65535&(0!=n.idRangeOffset[o]?n.glyphIdArray[e-n.startCount[o]+(n.idRangeOffset[o]>>1)-(n.idRangeOffset.length-o)]:e+n.idDelta[o])}if(12==n.format){if(e>n.groups[n.groups.length-1][1])return 0;for(i=0;i<n.groups.length;i++){var s=n.groups[i];if(s[0]<=e&&e<=s[1])return s[2]+(e-s[0])}return 0}throw"unknown cmap table format "+n.format},e.U.glyphToPath=function(r,t){var a={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[t]){var n=r.SVG.entries[t];return null==n?a:("string"==typeof n&&(n=e.SVG.toPath(n),r.SVG.entries[t]=n),n)}if(r.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},i=r.CFF,s=r.CFF.Private;if(i.ROS){for(var h=0;i.FDSelect[h+2]<=t;)h+=2;s=i.FDArray[i.FDSelect[h+1]].Private}e.U._drawCFF(r.CFF.CharStrings[t],o,i,s,a)}else r.glyf&&e.U._drawGlyf(t,r,a);return a},e.U._drawGlyf=function(r,t,a){var n=t.glyf[r];null==n&&(n=t.glyf[r]=e.glyf._parseGlyf(t,r)),null!=n&&(n.noc>-1?e.U._simpleGlyph(n,a):e.U._compoGlyph(n,t,a))},e.U._simpleGlyph=function(r,t){for(var a=0;a<r.noc;a++){for(var n=0==a?0:r.endPts[a-1]+1,o=r.endPts[a],i=n;i<=o;i++){var s=i==n?o:i-1,h=i==o?n:i+1,f=1&r.flags[i],u=1&r.flags[s],l=1&r.flags[h],d=r.xs[i],c=r.ys[i];if(i==n)if(f){if(!u){e.U.P.moveTo(t,d,c);continue}e.U.P.moveTo(t,r.xs[s],r.ys[s])}else u?e.U.P.moveTo(t,r.xs[s],r.ys[s]):e.U.P.moveTo(t,(r.xs[s]+d)/2,(r.ys[s]+c)/2);f?u&&e.U.P.lineTo(t,d,c):l?e.U.P.qcurveTo(t,d,c,r.xs[h],r.ys[h]):e.U.P.qcurveTo(t,d,c,(d+r.xs[h])/2,(c+r.ys[h])/2)}e.U.P.closePath(t)}},e.U._compoGlyph=function(r,t,a){for(var n=0;n<r.parts.length;n++){var o={cmds:[],crds:[]},i=r.parts[n];e.U._drawGlyf(i.glyphIndex,t,o);for(var s=i.m,h=0;h<o.crds.length;h+=2){var f=o.crds[h],u=o.crds[h+1];a.crds.push(f*s.a+u*s.b+s.tx),a.crds.push(f*s.c+u*s.d+s.ty)}for(h=0;h<o.cmds.length;h++)a.cmds.push(o.cmds[h])}},e.U._getGlyphClass=function(r,t){var a=e._lctf.getInterval(t,r);return-1==a?0:t[a+2]},e.U.getPairAdjustment=function(r,t,a){if(r.GPOS)for(var n=r.GPOS,o=n.lookupList,i=n.featureList,s=[],h=0;h<i.length;h++){var f=i[h];if("kern"==f.tag)for(var u=0;u<f.tab.length;u++)if(!s[f.tab[u]]){s[f.tab[u]]=!0;for(var l=o[f.tab[u]],d=0;d<l.tabs.length;d++)if(null!=l.tabs[h]){var c,p=l.tabs[d];if(!p.coverage||-1!=(c=e._lctf.coverageIndex(p.coverage,t)))if(1==l.ltype);else if(2==l.ltype){var v;if(1==p.fmt){var g=p.pairsets[c];for(h=0;h<g.length;h++)g[h].gid2==a&&(v=g[h])}else if(2==p.fmt){var y=e.U._getGlyphClass(t,p.classDef1),m=e.U._getGlyphClass(a,p.classDef2);v=p.matrix[y][m]}if(v&&v.val2)return v.val2[2]}}}}if(r.kern){var U=r.kern.glyph1.indexOf(t);if(-1!=U){var S=r.kern.rval[U].glyph2.indexOf(a);if(-1!=S)return r.kern.rval[U].vals[S]}}return 0},e.U.stringToGlyphs=function(r,t){for(var a=[],n=0;n<t.length;n++)(o=t.codePointAt(n))>65535&&n++,a.push(e.U.codeToGlyph(r,o));for(n=0;n<t.length;n++){var o;if(2367==(o=t.codePointAt(n))){var i=a[n-1];a[n-1]=a[n],a[n]=i}o>65535&&n++}var s=r.GSUB;if(null==s)return a;for(var h=s.lookupList,f=s.featureList,u=["rlig","liga","mset","isol","init","fina","medi","half","pres","blws"],l=[],d=0;d<f.length;d++){var c=f[d];if(-1!=u.indexOf(c.tag))for(var p=0;p<c.tab.length;p++)if(!l[c.tab[p]]){l[c.tab[p]]=!0;for(var v=h[c.tab[p]],g=0;g<a.length;g++){var y=e.U._getWPfeature(t,g);-1!="isol,init,fina,medi".indexOf(c.tag)&&c.tag!=y||e.U._applySubs(a,g,v,h)}}}return a},e.U._getWPfeature=function(r,e){var t='\n\t" ,.:;!?()  ،',a="آأؤإاةدذرزوٱٲٳٵٶٷڈډڊڋڌڍڎڏڐڑڒړڔڕږڗژڙۀۃۄۅۆۇۈۉۊۋۍۏےۓەۮۯܐܕܖܗܘܙܞܨܪܬܯݍݙݚݛݫݬݱݳݴݸݹࡀࡆࡇࡉࡔࡧࡩࡪࢪࢫࢬࢮࢱࢲࢹૅેૉ૊૎૏ૐ૑૒૝ૡ૤૯஁ஃ஄அஉ஌எஏ஑னப஫஬",n=0==e||-1!=t.indexOf(r[e-1]),o=e==r.length-1||-1!=t.indexOf(r[e+1]);return n||-1==a.indexOf(r[e-1])||(n=!0),o||-1==a.indexOf(r[e])||(o=!0),o||-1=="ꡲ્૗".indexOf(r[e+1])||(o=!0),n||-1=="ꡲ્૗".indexOf(r[e])||(n=!0),n?o?"isol":"init":o?"fina":"medi"},e.U._applySubs=function(r,t,a,n){for(var o=r.length-t-1,i=0;i<a.tabs.length;i++)if(null!=a.tabs[i]){var s,h=a.tabs[i];if(!h.coverage||-1!=(s=e._lctf.coverageIndex(h.coverage,r[t])))if(1==a.ltype)r[t],1==h.fmt?r[t]=r[t]+h.delta:r[t]=h.newg[s];else if(4==a.ltype)for(var f=h.vals[s],u=0;u<f.length;u++){var l=f[u],d=l.chain.length;if(!(d>o)){for(var c=!0,p=0,v=0;v<d;v++){for(;-1==r[t+p+(1+v)];)p++;l.chain[v]!=r[t+p+(1+v)]&&(c=!1)}if(c){for(r[t]=l.nglyph,v=0;v<d+p;v++)r[t+v+1]=-1;break}}}else if(5==a.ltype&&2==h.fmt)for(var g=e._lctf.getInterval(h.cDef,r[t]),y=h.cDef[g+2],m=h.scset[y],U=0;U<m.length;U++){var S=m[U],x=S.input;if(!(x.length>o)){for(c=!0,v=0;v<x.length;v++){var b=e._lctf.getInterval(h.cDef,r[t+1+v]);if(-1==g&&h.cDef[b+2]!=x[v]){c=!1;break}}if(c){var F=S.substLookupRecords;for(u=0;u<F.length;u+=2)F[u],F[u+1]}}}else if(6==a.ltype&&3==h.fmt){if(!e.U._glsCovered(r,h.backCvg,t-h.backCvg.length))continue;if(!e.U._glsCovered(r,h.inptCvg,t))continue;if(!e.U._glsCovered(r,h.ahedCvg,t+h.inptCvg.length))continue;var _=h.lookupRec;for(U=0;U<_.length;U+=2){g=_[U];var C=n[_[U+1]];e.U._applySubs(r,t+g,C,n)}}}},e.U._glsCovered=function(r,t,a){for(var n=0;n<t.length;n++)if(-1==e._lctf.coverageIndex(t[n],r[a+n]))return!1;return!0},e.U.glyphsToPath=function(r,t,a){for(var n={cmds:[],crds:[]},o=0,i=0;i<t.length;i++){var s=t[i];if(-1!=s){for(var h=i<t.length-1&&-1!=t[i+1]?t[i+1]:0,f=e.U.glyphToPath(r,s),u=0;u<f.crds.length;u+=2)n.crds.push(f.crds[u]+o),n.crds.push(f.crds[u+1]);for(a&&n.cmds.push(a),u=0;u<f.cmds.length;u++)n.cmds.push(f.cmds[u]);a&&n.cmds.push("X"),o+=r.hmtx.aWidth[s],i<t.length-1&&(o+=e.U.getPairAdjustment(r,s,h))}}return n},e.U.pathToSVG=function(r,e){null==e&&(e=5);for(var t=[],a=0,n={M:2,L:2,Q:4,C:6},o=0;o<r.cmds.length;o++){var i=r.cmds[o],s=a+(n[i]?n[i]:0);for(t.push(i);a<s;){var h=r.crds[a++];t.push(parseFloat(h.toFixed(e))+(a==s?"":" "))}}return t.join("")},e.U.pathToContext=function(r,e){for(var t=0,a=r.crds,n=0;n<r.cmds.length;n++){var o=r.cmds[n];"M"==o?(e.moveTo(a[t],a[t+1]),t+=2):"L"==o?(e.lineTo(a[t],a[t+1]),t+=2):"C"==o?(e.bezierCurveTo(a[t],a[t+1],a[t+2],a[t+3],a[t+4],a[t+5]),t+=6):"Q"==o?(e.quadraticCurveTo(a[t],a[t+1],a[t+2],a[t+3]),t+=4):"#"==o.charAt(0)?(e.beginPath(),e.fillStyle=o):"Z"==o?e.closePath():"X"==o&&e.fill()}},e.U.P={},e.U.P.moveTo=function(r,e,t){r.cmds.push("M"),r.crds.push(e,t)},e.U.P.lineTo=function(r,e,t){r.cmds.push("L"),r.crds.push(e,t)},e.U.P.curveTo=function(r,e,t,a,n,o,i){r.cmds.push("C"),r.crds.push(e,t,a,n,o,i)},e.U.P.qcurveTo=function(r,e,t,a,n){r.cmds.push("Q"),r.crds.push(e,t,a,n)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,t,a,n,o){for(var i=t.stack,s=t.nStems,h=t.haveWidth,f=t.width,u=t.open,l=0,d=t.x,c=t.y,p=0,v=0,g=0,y=0,m=0,U=0,S=0,x=0,b=0,F=0,_={val:0,size:0};l<r.length;){e.CFF.getCharString(r,l,_);var C=_.val;if(l+=_.size,"o1"==C||"o18"==C)i.length%2!=0&&!h&&(f=i.shift()+n.nominalWidthX),s+=i.length>>1,i.length=0,h=!0;else if("o3"==C||"o23"==C)i.length%2!=0&&!h&&(f=i.shift()+n.nominalWidthX),s+=i.length>>1,i.length=0,h=!0;else if("o4"==C)i.length>1&&!h&&(f=i.shift()+n.nominalWidthX,h=!0),u&&e.U.P.closePath(o),c+=i.pop(),e.U.P.moveTo(o,d,c),u=!0;else if("o5"==C)for(;i.length>0;)d+=i.shift(),c+=i.shift(),e.U.P.lineTo(o,d,c);else if("o6"==C||"o7"==C)for(var T=i.length,w="o6"==C,k=0;k<T;k++){var P=i.shift();w?d+=P:c+=P,w=!w,e.U.P.lineTo(o,d,c)}else if("o8"==C||"o24"==C){T=i.length;for(var D=0;D+6<=T;)p=d+i.shift(),v=c+i.shift(),g=p+i.shift(),y=v+i.shift(),d=g+i.shift(),c=y+i.shift(),e.U.P.curveTo(o,p,v,g,y,d,c),D+=6;"o24"==C&&(d+=i.shift(),c+=i.shift(),e.U.P.lineTo(o,d,c))}else{if("o11"==C)break;if("o1234"==C||"o1235"==C||"o1236"==C||"o1237"==C)"o1234"==C&&(v=c,g=(p=d+i.shift())+i.shift(),F=y=v+i.shift(),U=y,x=c,d=(S=(m=(b=g+i.shift())+i.shift())+i.shift())+i.shift(),e.U.P.curveTo(o,p,v,g,y,b,F),e.U.P.curveTo(o,m,U,S,x,d,c)),"o1235"==C&&(p=d+i.shift(),v=c+i.shift(),g=p+i.shift(),y=v+i.shift(),b=g+i.shift(),F=y+i.shift(),m=b+i.shift(),U=F+i.shift(),S=m+i.shift(),x=U+i.shift(),d=S+i.shift(),c=x+i.shift(),i.shift(),e.U.P.curveTo(o,p,v,g,y,b,F),e.U.P.curveTo(o,m,U,S,x,d,c)),"o1236"==C&&(p=d+i.shift(),v=c+i.shift(),g=p+i.shift(),F=y=v+i.shift(),U=y,S=(m=(b=g+i.shift())+i.shift())+i.shift(),x=U+i.shift(),d=S+i.shift(),e.U.P.curveTo(o,p,v,g,y,b,F),e.U.P.curveTo(o,m,U,S,x,d,c)),"o1237"==C&&(p=d+i.shift(),v=c+i.shift(),g=p+i.shift(),y=v+i.shift(),b=g+i.shift(),F=y+i.shift(),m=b+i.shift(),U=F+i.shift(),S=m+i.shift(),x=U+i.shift(),Math.abs(S-d)>Math.abs(x-c)?d=S+i.shift():c=x+i.shift(),e.U.P.curveTo(o,p,v,g,y,b,F),e.U.P.curveTo(o,m,U,S,x,d,c));else if("o14"==C){if(i.length>0&&!h&&(f=i.shift()+a.nominalWidthX,h=!0),4==i.length){var G=i.shift(),M=i.shift(),I=i.shift(),O=i.shift(),A=e.CFF.glyphBySE(a,I),B=e.CFF.glyphBySE(a,O);e.U._drawCFF(a.CharStrings[A],t,a,n,o),t.x=G,t.y=M,e.U._drawCFF(a.CharStrings[B],t,a,n,o)}u&&(e.U.P.closePath(o),u=!1)}else if("o19"==C||"o20"==C)i.length%2!=0&&!h&&(f=i.shift()+n.nominalWidthX),s+=i.length>>1,i.length=0,h=!0,l+=s+7>>3;else if("o21"==C)i.length>2&&!h&&(f=i.shift()+n.nominalWidthX,h=!0),c+=i.pop(),d+=i.pop(),u&&e.U.P.closePath(o),e.U.P.moveTo(o,d,c),u=!0;else if("o22"==C)i.length>1&&!h&&(f=i.shift()+n.nominalWidthX,h=!0),d+=i.pop(),u&&e.U.P.closePath(o),e.U.P.moveTo(o,d,c),u=!0;else if("o25"==C){for(;i.length>6;)d+=i.shift(),c+=i.shift(),e.U.P.lineTo(o,d,c);p=d+i.shift(),v=c+i.shift(),g=p+i.shift(),y=v+i.shift(),d=g+i.shift(),c=y+i.shift(),e.U.P.curveTo(o,p,v,g,y,d,c)}else if("o26"==C)for(i.length%2&&(d+=i.shift());i.length>0;)p=d,v=c+i.shift(),d=g=p+i.shift(),c=(y=v+i.shift())+i.shift(),e.U.P.curveTo(o,p,v,g,y,d,c);else if("o27"==C)for(i.length%2&&(c+=i.shift());i.length>0;)v=c,g=(p=d+i.shift())+i.shift(),y=v+i.shift(),d=g+i.shift(),c=y,e.U.P.curveTo(o,p,v,g,y,d,c);else if("o10"==C||"o29"==C){var L="o10"==C?n:a;if(0==i.length)console.log("error: empty stack");else{var R=i.pop(),W=L.Subrs[R+L.Bias];t.x=d,t.y=c,t.nStems=s,t.haveWidth=h,t.width=f,t.open=u,e.U._drawCFF(W,t,a,n,o),d=t.x,c=t.y,s=t.nStems,h=t.haveWidth,f=t.width,u=t.open}}else if("o30"==C||"o31"==C){var z=i.length,E=(D=0,"o31"==C);for(D+=z-(T=-3&z);D<T;)E?(v=c,g=(p=d+i.shift())+i.shift(),c=(y=v+i.shift())+i.shift(),T-D==5?(d=g+i.shift(),D++):d=g,E=!1):(p=d,v=c+i.shift(),g=p+i.shift(),y=v+i.shift(),d=g+i.shift(),T-D==5?(c=y+i.shift(),D++):c=y,E=!0),e.U.P.curveTo(o,p,v,g,y,d,c),D+=4}else{if("o"==(C+"").charAt(0))throw console.log("Unknown operation: "+C,r),C;i.push(C)}}}t.x=d,t.y=c,t.nStems=s,t.haveWidth=h,t.width=f,t.open=u},e},function(){var r=function(){var r={};function e(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function t(r,t){this.source=r,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new e,this.dtree=new e}var a=new e,n=new e,o=new Uint8Array(30),i=new Uint16Array(30),s=new Uint8Array(30),h=new Uint16Array(30),f=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=new e,l=new Uint8Array(320);function d(r,e,t,a){var n,o;for(n=0;n<t;++n)r[n]=0;for(n=0;n<30-t;++n)r[n+t]=n/t|0;for(o=a,n=0;n<30;++n)e[n]=o,o+=1<<r[n]}var c=new Uint16Array(16);function p(r,e,t,a){var n,o;for(n=0;n<16;++n)r.table[n]=0;for(n=0;n<a;++n)r.table[e[t+n]]++;for(r.table[0]=0,o=0,n=0;n<16;++n)c[n]=o,o+=r.table[n];for(n=0;n<a;++n)e[t+n]&&(r.trans[c[e[t+n]]++]=n)}function v(r){r.bitcount--||(r.tag=r.source[r.sourceIndex++],r.bitcount=7);var e=1&r.tag;return r.tag>>>=1,e}function g(r,e,t){if(!e)return t;for(;r.bitcount<24;)r.tag|=r.source[r.sourceIndex++]<<r.bitcount,r.bitcount+=8;var a=r.tag&65535>>>16-e;return r.tag>>>=e,r.bitcount-=e,a+t}function y(r,e){for(;r.bitcount<24;)r.tag|=r.source[r.sourceIndex++]<<r.bitcount,r.bitcount+=8;var t=0,a=0,n=0,o=r.tag;do{a=2*a+(1&o),o>>>=1,++n,t+=e.table[n],a-=e.table[n]}while(a>=0);return r.tag=o,r.bitcount-=n,e.trans[t+a]}function m(r,e,t){var a,n,o,i,s,h;for(a=g(r,5,257),n=g(r,5,1),o=g(r,4,4),i=0;i<19;++i)l[i]=0;for(i=0;i<o;++i){var d=g(r,3,0);l[f[i]]=d}for(p(u,l,0,19),s=0;s<a+n;){var c=y(r,u);switch(c){case 16:var v=l[s-1];for(h=g(r,2,3);h;--h)l[s++]=v;break;case 17:for(h=g(r,3,3);h;--h)l[s++]=0;break;case 18:for(h=g(r,7,11);h;--h)l[s++]=0;break;default:l[s++]=c}}p(e,l,0,a),p(t,l,a,n)}function U(r,e,t){for(;;){var a,n,f,u,l=y(r,e);if(256===l)return 0;if(l<256)r.dest[r.destLen++]=l;else for(a=g(r,o[l-=257],i[l]),n=y(r,t),u=f=r.destLen-g(r,s[n],h[n]);u<f+a;++u)r.dest[r.destLen++]=r.dest[u]}}function S(r){for(var e,t;r.bitcount>8;)r.sourceIndex--,r.bitcount-=8;if((e=256*(e=r.source[r.sourceIndex+1])+r.source[r.sourceIndex])!==(65535&~(256*r.source[r.sourceIndex+3]+r.source[r.sourceIndex+2])))return-3;for(r.sourceIndex+=4,t=e;t;--t)r.dest[r.destLen++]=r.source[r.sourceIndex++];return r.bitcount=0,0}return function(r,e){var t;for(t=0;t<7;++t)r.table[t]=0;for(r.table[7]=24,r.table[8]=152,r.table[9]=112,t=0;t<24;++t)r.trans[t]=256+t;for(t=0;t<144;++t)r.trans[24+t]=t;for(t=0;t<8;++t)r.trans[168+t]=280+t;for(t=0;t<112;++t)r.trans[176+t]=144+t;for(t=0;t<5;++t)e.table[t]=0;for(e.table[5]=32,t=0;t<32;++t)e.trans[t]=t}(a,n),d(o,i,4,3),d(s,h,2,1),o[28]=0,i[28]=258,r.exports=function(r,e){var o,i,s=new t(r,e);do{switch(o=v(s),g(s,2,0)){case 0:i=S(s);break;case 1:i=U(s,a,n);break;case 2:m(s,s.ltree,s.dtree),i=U(s,s.ltree,s.dtree);break;default:i=-3}if(0!==i)throw new Error("Data error")}while(!o);return s.destLen<s.dest.length?"function"==typeof s.dest.slice?s.dest.slice(0,s.destLen):s.dest.subarray(0,s.destLen):s.dest},r.exports}();return function(e){return function(r,e){var t=new DataView(r),a=0;function n(){var r=t.getUint16(a);return a+=2,r}function o(){var r=t.getUint32(a);return a+=4,r}function i(r){m.setUint16(U,r),U+=2}function s(r){m.setUint32(U,r),U+=4}for(var h={signature:o(),flavor:o(),length:o(),numTables:n(),reserved:n(),totalSfntSize:o(),majorVersion:n(),minorVersion:n(),metaOffset:o(),metaLength:o(),metaOrigLength:o(),privOffset:o(),privLength:o()},f=0;Math.pow(2,f)<=h.numTables;)f++;f--;for(var u=16*Math.pow(2,f),l=16*h.numTables-u,d=12,c=[],p=0;p<h.numTables;p++)c.push({tag:o(),offset:o(),compLength:o(),origLength:o(),origChecksum:o()}),d+=16;var v,g=new Uint8Array(12+16*c.length+c.reduce((function(r,e){return r+e.origLength+4}),0)),y=g.buffer,m=new DataView(y),U=0;return s(h.flavor),i(h.numTables),i(u),i(f),i(l),c.forEach((function(r){s(r.tag),s(r.origChecksum),s(d),s(r.origLength),r.outOffset=d,(d+=r.origLength)%4!=0&&(d+=4-d%4)})),c.forEach((function(t){var a=r.slice(t.offset,t.offset+t.compLength);if(t.compLength!=t.origLength){var n=new Uint8Array(t.origLength);e(new Uint8Array(a,2),n)}else n=new Uint8Array(a);g.set(n,t.outOffset);var o=0;(d=t.outOffset+t.origLength)%4!=0&&(o=4-d%4),g.set(new Uint8Array(o).buffer,t.outOffset+t.origLength),v=d+o})),y.slice(0,v)}(e,r)}},function(r,e){var t={M:2,L:2,Q:4,C:6,Z:0};return function(a){var n,o,i,s=new Uint8Array(a,0,4),h=r._bin.readASCII(s,0,4);if("wOFF"===h)a=e(a);else if("wOF2"===h)throw new Error("woff2 fonts not supported");return n=r.parse(a)[0],o=Object.create(null),i={unitsPerEm:n.head.unitsPerEm,ascender:n.hhea.ascender,descender:n.hhea.descender,forEachGlyph:function(e,a,s,h){var f=0,u=1/i.unitsPerEm*a,l=r.U.stringToGlyphs(n,e),d=0;return l.forEach((function(i){if(-1!==i){var l=o[i];if(!l){var c,p,v,g,y=r.U.glyphToPath(n,i),m=y.cmds,U=y.crds;if(U.length){c=p=1/0,v=g=-1/0;for(var S=0,x=U.length;S<x;S+=2){var b=U[S],F=U[S+1];b<c&&(c=b),F<p&&(p=F),b>v&&(v=b),F>g&&(g=F)}}else c=v=p=g=0;l=o[i]={index:i,advanceWidth:n.hmtx.aWidth[i],xMin:c,yMin:p,xMax:v,yMax:g,pathCommandCount:m.length,forEachPathCommand:function(r){for(var e=0,a=[],n=0,o=m.length;n<o;n++){var i=t[m[n]];a.length=1+i,a[0]=m[n];for(var s=1;s<=i;s++)a[s]=U[e++];r.apply(null,a)}}}}h.call(null,l,f,d),l.advanceWidth&&(f+=l.advanceWidth*u),s&&(f+=s*a)}d+=e.codePointAt(d)>65535?2:1})),f}}}}],init:function(r,e,t){return t(r(),e())}}),i={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,textureWidth:2048},s=new e.Color,h=Object.create(null);function f(r,t){if((r=u({},r)).font=(l=r.font||i.defaultFontURL,n||(n="undefined"==typeof document?{}:document.createElement("a")),n.href=l,n.href),r.text=""+r.text,r.sdfGlyphSize=r.sdfGlyphSize||i.sdfGlyphSize,null!=r.colorRanges){var a={};for(var o in r.colorRanges)if(r.colorRanges.hasOwnProperty(o)){var f=r.colorRanges[o];"number"!=typeof f&&(f=s.set(f).getHex()),a[o]=f}r.colorRanges=a}var l;Object.freeze(r);var c=i.textureWidth,p=r.sdfGlyphSize,v=r.font+"@"+p,g=h[v];g||((g=h[v]={sdfTexture:new e.DataTexture(new Uint8Array(p*c),c,p,e.LuminanceFormat,void 0,void 0,void 0,void 0,e.LinearFilter,e.LinearFilter)}).sdfTexture.font=r.font),d(r).then((function(e){e.newGlyphSDFs&&(e.newGlyphSDFs.forEach((function(r){for(var e=r.textureData,t=r.atlasIndex,a=g.sdfTexture.image;a.data.length<(t+1)*p*p;){var n=new Uint8Array(2*a.data.length);n.set(a.data),a.data=n,a.height*=2}for(var o=a.width/p,i=0;i<p;i++)for(var s=i*p,h=a.width*p*Math.floor(t/o)+t%o*p+i*a.width,f=0;f<p;f++)a.data[h+f]=e[s+f]})),g.sdfTexture.needsUpdate=!0),t(Object.freeze({parameters:r,sdfTexture:g.sdfTexture,sdfGlyphSize:p,sdfMinDistancePercent:1/8,glyphBounds:e.glyphBounds,glyphAtlasIndices:e.glyphAtlasIndices,glyphColors:e.glyphColors,caretPositions:e.caretPositions,caretHeight:e.caretHeight,chunkedBounds:e.chunkedBounds,ascender:e.ascender,descender:e.descender,lineHeight:e.lineHeight,topBaseline:e.topBaseline,totalBounds:e.totalBounds,totalBlockSize:e.totalBlockSize,timings:e.timings}))}))}function u(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}var l=t.defineWorkerModule({name:"FontProcessor",dependencies:[i,1/8,o,function(r){var e=r.xMin,t=r.yMin,a=r.xMax-e,n=r.yMax-t,o={0:null,1:null,2:null,3:null,data:null,cx:Math.round(e+a/2),cy:Math.round(t+n/2),r:Math.pow(2,Math.floor(Math.log(Math.max(a,n))*Math.LOG2E)),minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};function i(r){!function r(e,t){if(!1!==t(e)&&!e.data)for(var a=0;a<4;a++)null!==e[a]&&r(e[a],t)}(o,r)}function s(r,e,t,a,n,o){var i=n-t,s=o-a,h=i*i+s*s,f=h?Math.max(0,Math.min(1,((r-t)*i+(e-a)*s)/h)):0,u=r-(t+f*i),l=e-(a+f*s);return u*u+l*l}return{addLineSegment:function(r,e,t,a){!function r(e,t){var a=e.minX,n=e.minY,o=e.maxX,i=e.maxY,s=e.cx,h=e.cy;a<t.minX&&(t.minX=a),n<t.minY&&(t.minY=n),o>t.maxX&&(t.maxX=o),i>t.maxY&&(t.maxY=i);var f=t.data;if(f)if(f.cx===s&&f.cy===h){for(;f.next;)f=f.next;f.next=e}else t.data=null,r(f,t),r(e,t);else{var u=(h<t.cy?0:2)+(s<t.cx?0:1);t[u]?r(e,t[u]):t[u]={0:null,1:null,2:null,3:null,data:e,cx:t.cx+t.r/2*(u%2?1:-1),cy:t.cy+t.r/2*(u<2?-1:1),r:t.r/2,minX:a,minY:n,maxX:o,maxY:i}}}({x0:r,y0:e,x1:t,y1:a,cx:(r+t)/2,cy:(e+a)/2,minX:Math.min(r,t),minY:Math.min(e,a),maxX:Math.max(r,t),maxY:Math.max(e,a),next:null},o)},findNearestSignedDistance:function(r,e,t){var a=t,n=a*a;return i((function(t){if(r-a>t.maxX||r+a<t.minX||e-a>t.maxY||e+a<t.minY)return!1;for(var o=t.data;o;o=o.next){var i=s(r,e,o.x0,o.y0,o.x1,o.y1);i<n&&(n=i,a=Math.sqrt(i))}})),function(r,e){var t=!1;return i((function(a){if(a.maxX<r||a.minY>e||a.maxY<e)return!1;for(var n=a.data;n;n=n.next){var o=n.x0,i=n.y0,s=n.x1,h=n.y1;i>e!=h>e&&r<(s-o)*(e-i)/(h-i)+o&&(t=!t)}})),t}(r,e)||(a=-a),a}}},function(r,e){var t=e.sdfDistancePercent;function a(r,e,t,a,n,o,i){var s=1-i;return{x:s*s*r+2*s*i*t+i*i*n,y:s*s*e+2*s*i*a+i*i*o}}function n(r,e,t,a,n,o,i,s,h){var f=1-h;return{x:f*f*f*r+3*f*f*h*t+3*f*h*h*n+h*h*h*i,y:f*f*f*e+3*f*f*h*a+3*f*h*h*o+h*h*h*s}}return function(e,o){var i=new Uint8Array(o*o),s=e.xMax-e.xMin,h=e.yMax-e.yMin,f=Math.max(s,h)*t,u=(s+2*f)/o,l=(h+2*f)/o,d=e.xMin-f-u,c=e.yMin-f-l,p=e.xMax+f+u,v=e.yMax+f+l;if(e.pathCommandCount){var g,y,m,U,S=r(e);e.forEachPathCommand((function(r,e,t,o,i,s,h){switch(r){case"M":m=g=e,U=y=t;break;case"L":e===m&&t===U||S.addLineSegment(m,U,m=e,U=t);break;case"Q":for(var f={x:m,y:U},u=1;u<16;u++){var l=a(m,U,e,t,o,i,u/15);S.addLineSegment(f.x,f.y,l.x,l.y),f=l}m=o,U=i;break;case"C":for(var d={x:m,y:U},c=1;c<16;c++){var p=n(m,U,e,t,o,i,s,h,c/15);S.addLineSegment(d.x,d.y,p.x,p.y),d=p}m=s,U=h;break;case"Z":m===g&&U===y||S.addLineSegment(m,U,g,y)}}));for(var x=0;x<o;x++)for(var b=0;b<o;b++){var F=S.findNearestSignedDistance(d+(p-d)*(x+.5)/o,c+(v-c)*(b+.5)/o,f),_=isFinite(F)?Math.round(255*(1+F/f)*.5):F;_=Math.max(0,Math.min(255,_)),i[b*o+x]=_}}return{textureData:i,renderingBounds:[d,c,p,v]}}},function(r,e,t){var a=t.defaultFontUrl,n=Object.create(null),o=Object.create(null);function i(e,t){e||(e=a);var n=o[e];n?n.pending?n.pending.push(t):t(n):(o[e]={pending:[t]},function(e,t){!function n(){var o=function(r){console.error("Failure loading font "+e+(e===a?"":"; trying fallback"),r),e!==a&&(e=a,n())};try{var i=new XMLHttpRequest;i.open("get",e,!0),i.responseType="arraybuffer",i.onload=function(){if(i.status>=400)o(new Error(i.statusText));else if(i.status>0)try{var e=r(i.response);t(e)}catch(a){o(a)}},i.onerror=o,i.send()}catch(s){o(s)}}()}(e,(function(r){var t=o[e].pending;o[e]=r,t.forEach((function(e){return e(r)}))})))}function s(r,t,o){var s=r.text;void 0===s&&(s="");var l=r.font;void 0===l&&(l=a);var d=r.sdfGlyphSize;void 0===d&&(d=64);var c=r.fontSize;void 0===c&&(c=1);var p=r.letterSpacing;void 0===p&&(p=0);var v=r.lineHeight;void 0===v&&(v="normal");var g=r.maxWidth;void 0===g&&(g=1/0);var y=r.textAlign;void 0===y&&(y="left");var m=r.textIndent;void 0===m&&(m=0);var U=r.whiteSpace;void 0===U&&(U="normal");var S=r.overflowWrap;void 0===S&&(S="normal");var x=r.anchorX;void 0===x&&(x=0);var b=r.anchorY;void 0===b&&(b=0);var F=r.includeCaretPositions;void 0===F&&(F=!1);var _=r.chunkedBoundsSize;void 0===_&&(_=8192);var C=r.colorRanges;void 0===C&&(C=null),void 0===o&&(o=!1);var T=f(),w={total:0,fontLoad:0,layout:0,sdf:{},sdfTotal:0};s.indexOf("\r")>-1&&(console.warn("FontProcessor.process: got text with \\r chars; normalizing to \\n"),s=s.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),c=+c,p=+p,g=+g,v=v||"normal",m=+m,function(r,e,t){r||(r=a);var o=r+"@"+e,s=n[o];s?t(s):i(r,(function(r){s=n[o]||(n[o]={fontObj:r,glyphs:{},glyphCount:0}),t(s)}))}(l,d,(function(r){var a=r.fontObj,n=isFinite(g),i=null,l=null,k=null,P=null,D=null,G=null,M=null,I=0,O=0,A="nowrap"!==U,B=a.ascender,L=a.descender,R=a.unitsPerEm;w.fontLoad=f()-T;var W=f(),z=c/R;"normal"===v&&(v=(B-L)/R);var E=((v*=c)-(B-L)*z)/2,V=-(c+E),X=Math.min(v,(B-L)*z),j=(B+L)/2*z-X/2,Y=m,N=new u,H=[N];if(a.forEachGlyph(s,c,p,(function(r,e,t){var a,o=s.charAt(t),i=r.advanceWidth*z,h=N.count;if("isEmpty"in r||(r.isWhitespace=!!o&&/\s/.test(o),r.isEmpty=r.xMin===r.xMax||r.yMin===r.yMax),r.isWhitespace||r.isEmpty||O++,A&&n&&!r.isWhitespace&&e+i+Y>g&&h){if(N.glyphAt(h-1).glyphObj.isWhitespace)a=new u,Y=-e;else for(var f=h;f--;){if(0===f&&"break-word"===S){a=new u,Y=-e;break}if(N.glyphAt(f).glyphObj.isWhitespace){var l=(a=N.splitAt(f+1)).glyphAt(0).x;Y-=l;for(var d=a.count;d--;)a.glyphAt(d).x-=l;break}}a&&(N.isSoftWrapped=!0,N=a,H.push(N),I=g)}var v=N.glyphAt(N.count);v.glyphObj=r,v.x=e+Y,v.width=i,v.charIndex=t,"\n"===o&&(N=new u,H.push(N),Y=-(e+i+p*c)+m)})),H.forEach((function(r){for(var e=r.count;e--;){var t=r.glyphAt(e),a=t.glyphObj,n=t.x,o=t.width;if(!a.isWhitespace)return r.width=n+o,void(r.width>I&&(I=r.width))}})),!o){var q=0,Z=0;if(x&&("number"==typeof x?q=-x:"string"==typeof x&&(q=-I*("left"===x?0:"center"===x?.5:"right"===x?1:h(x)))),b)if("number"==typeof b)Z=-b;else if("string"==typeof b){var Q=H.length*v;Z="top"===b?0:"top-baseline"===b?-V:"middle"===b?Q/2:"bottom"===b?Q:"bottom-baseline"===b?Q-E+L*z:h(b)*Q}l=new Float32Array(4*O),k=new Float32Array(O),G=[1/0,1/0,-1/0,-1/0],M=[];var $=V;F&&(D=new Float32Array(3*s.length)),C&&(P=new Uint8Array(3*O));var J,K,rr=0,er=-1,tr=-1;H.forEach((function(t){var a=t.count,n=t.width;if(a>0){var o=0,h=0;if("center"===y)o=(I-n)/2;else if("right"===y)o=I-n;else if("justify"===y&&t.isSoftWrapped){for(var u=0,c=a;c--;)if(!t.glyphAt(c).glyphObj.isWhitespace){for(;c--;)t.glyphAt(c).glyphObj,t.glyphAt(c).glyphObj.isWhitespace&&u++;break}h=(I-n)/u}for(var p=0;p<a;p++){var g=t.glyphAt(p),m=g.glyphObj;if(o&&(g.x+=o),0!==h&&m.isWhitespace&&(o+=h,g.width+=h),F){var U=g.charIndex;for(D[3*U]=g.x+q,D[3*U+1]=g.x+g.width+q,D[3*U+2]=$+j+Z;U-er>1;)D[3*(er+1)]=D[3*er+1],D[3*(er+1)+1]=D[3*er+1],D[3*(er+1)+2]=D[3*er+2],er++;er=U}if(C)for(var S=g.charIndex;S>tr;)tr++,C.hasOwnProperty(tr)&&(K=C[tr]);if(!m.isWhitespace&&!m.isEmpty){var x=rr++,b=r.glyphs[m.index];if(!b){var T=f(),O=e(m,d);w.sdf[s.charAt(g.charIndex)]=f()-T,O.atlasIndex=r.glyphCount++,i||(i=[]),i.push(O),b=r.glyphs[m.index]={atlasIndex:O.atlasIndex,glyphObj:m,renderingBounds:O.renderingBounds}}var A=b.renderingBounds,B=4*x,L=l[B]=g.x+A[0]*z+q,R=l[B+1]=$+A[1]*z+Z,W=l[B+2]=g.x+A[2]*z+q,E=l[B+3]=$+A[3]*z+Z;if(L<G[0]&&(G[0]=L),R<G[1]&&(G[1]=R),W>G[2]&&(G[2]=W),E>G[3]&&(G[3]=E),x%_==0&&(J={start:x,end:x,rect:[1/0,1/0,-1/0,-1/0]},M.push(J)),J.end++,L<J.rect[0]&&(J.rect[0]=L),R<J.rect[1]&&(J.rect[1]=R),W>J.rect[2]&&(J.rect[2]=W),E>J.rect[3]&&(J.rect[3]=E),k[x]=b.atlasIndex,C){var V=3*x;P[V]=K>>16&255,P[V+1]=K>>8&255,P[V+2]=255&K}}}}$-=v}))}for(var ar in w.sdf)w.sdfTotal+=w.sdf[ar];w.layout=f()-W-w.sdfTotal,w.total=f()-T,t({glyphBounds:l,glyphAtlasIndices:k,caretPositions:D,caretHeight:X,glyphColors:P,chunkedBounds:M,ascender:B*z,descender:L*z,lineHeight:v,topBaseline:V,totalBounds:G,totalBlockSize:[I,H.length*v],newGlyphSDFs:i,timings:w})}))}function h(r){var e=r.match(/^([\d.]+)%$/),t=e?parseFloat(e[1]):NaN;return isNaN(t)?0:t/100}function f(){return(self.performance||Date).now()}function u(){this.data=[]}return u.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/4)},glyphAt:function(r){var e=u.flyweight;return e.data=this.data,e.index=r,e},splitAt:function(r){var e=new u;return e.data=this.data.splice(4*r),e}},u.flyweight=["glyphObj","x","width","charIndex"].reduce((function(r,e,t,a){return Object.defineProperty(r,e,{get:function(){return this.data[4*this.index+t]},set:function(r){this.data[4*this.index+t]=r}}),r}),{data:null,index:0}),{process:s,measure:function(r,e){s(r,(function(r){e({width:r.totalBlockSize[0],height:r.totalBlockSize[1]})}),{metricsOnly:!0})},loadFont:i}}],init:function(r,e,t,a,n,o){return o(t,n(a,{sdfDistancePercent:e}),{defaultFontUrl:r.defaultFontURL})}}),d=t.defineWorkerModule({name:"TextBuilder",dependencies:[l,t.ThenableWorkerModule],init:function(r,e){return function(t){var a=new e;return r.process(t,a.resolve),a}},getTransferables:function(r){var e=[r.glyphBounds.buffer,r.glyphAtlasIndices.buffer];return r.caretPositions&&e.push(r.caretPositions.buffer),r.newGlyphSDFs&&r.newGlyphSDFs.forEach((function(r){e.push(r.textureData.buffer)})),e}}),c={},p=new e.Vector3,v=function(r){function t(){r.call(this),this.detail=1,this.boundingSphere=new e.Sphere,this.boundingBox=new e.Box3}r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t;var a={detail:{configurable:!0}};return t.prototype.computeBoundingSphere=function(){},t.prototype.computeBoundingBox=function(){},a.detail.set=function(r){var t=this;if(r!==this._detail){this._detail=r,("number"!=typeof r||r<1)&&(r=1);var a=function(r){var t=c[r];return t||(t=c[r]=new e.PlaneBufferGeometry(1,1,r,r).translate(.5,.5,0)),t}(r);["position","normal","uv"].forEach((function(r){t.attributes[r]=a.attributes[r].clone()})),this.setIndex(a.getIndex().clone())}},a.detail.get=function(){return this._detail},t.prototype.updateGlyphs=function(r,e,t,a,n){g(this,"aTroikaGlyphBounds",r,4),g(this,"aTroikaGlyphIndex",e,1),g(this,"aTroikaGlyphColor",n,3),this._chunkedBounds=a,y(this,e.length);var o=this.boundingSphere;o.center.set((t[0]+t[2])/2,(t[1]+t[3])/2,0),o.radius=o.center.distanceTo(p.set(t[0],t[1],0));var i=this.boundingBox;i.min.set(t[0],t[1],0),i.max.set(t[2],t[3],0)},t.prototype.applyClipRect=function(r){var e=this.getAttribute("aTroikaGlyphIndex").count,t=this._chunkedBounds;if(t)for(var a=t.length;a--;){e=t[a].end;var n=t[a].rect;if(n[1]<r.w&&n[3]>r.y&&n[0]<r.z&&n[2]>r.x)break}y(this,e)},Object.defineProperties(t.prototype,a),t}(e.InstancedBufferGeometry);function g(r,t,a,n){var o=r.getAttribute(t);a?o&&o.array.length===a.length?(o.array.set(a),o.needsUpdate=!0):(r.setAttribute(t,new e.InstancedBufferAttribute(a,n)),delete r._maxInstanceCount,r.dispose()):o&&r.deleteAttribute(t)}function y(r,e){r[r.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=e}function m(r){var t=a.createDerivedMaterial(r,{extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new e.Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFMinDistancePct:{value:0},uTroikaTotalBounds:{value:new e.Vector4(0,0,0,0)},uTroikaClipRect:{value:new e.Vector4(0,0,0,0)},uTroikaOrient:{value:new e.Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaSDFTextureUV;\nvarying vec2 vTroikaGlyphUV;\nvarying vec3 vTroikaGlyphColor;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nvec4 clippedBounds = vec4(\n  clamp(bounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(bounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\nvTroikaGlyphUV = clippedXY.xy;\n\nfloat cols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvTroikaSDFTextureUV = vec2(\n  mod(aTroikaGlyphIndex, cols) + clippedXY.x,\n  floor(aTroikaGlyphIndex / cols) + clippedXY.y\n) * uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = vec2(\n  (position.x - uTroikaTotalBounds.x) / (uTroikaTotalBounds.z - uTroikaTotalBounds.x),\n  (position.y - uTroikaTotalBounds.y) / (uTroikaTotalBounds.w - uTroikaTotalBounds.y)\n);\n\nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform float uTroikaSDFMinDistancePct;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaSDFTextureUV;\nvarying vec2 vTroikaGlyphUV;\n\nfloat troikaGetTextAlpha() {\n  float troikaSDFValue = texture2D(uTroikaSDFTexture, vTroikaSDFTextureUV).r;\n  \n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(0.5, troikaSDFValue);\n  #else\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  float aaDist = min(\n    0.5,\n    0.5 * min(\n      fwidth(vTroikaGlyphUV.x),\n      fwidth(vTroikaGlyphUV.y)\n    )\n  ) / uTroikaSDFMinDistancePct;\n  #else\n  float aaDist = 0.01;\n  #endif\n  \n  float alpha = uTroikaSDFDebug ? troikaSDFValue : smoothstep(\n    0.5 - aaDist,\n    0.5 + aaDist,\n    troikaSDFValue\n  );\n  #endif\n  \n  return alpha;\n}\n",fragmentColorTransform:"\nfloat troikaAlphaMult = troikaGetTextAlpha();\nif (troikaAlphaMult == 0.0) {\n  discard;\n} else {\n  gl_FragColor.a *= troikaAlphaMult;\n}\n",customRewriter:function(r){var e=r.vertexShader,t=r.fragmentShader,n=/\buniform\s+vec3\s+diffuse\b/;return n.test(t)&&(t=t.replace(n,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),n.test(e)||(e=e.replace(a.voidMainRegExp,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:e,fragmentShader:t}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get:function(){return this.side},set:function(){}}}),t}v.prototype.setAttribute||(v.prototype.setAttribute=function(r,e){return this.attributes[r]=e,this});var U=new e.MeshBasicMaterial({color:16777215,side:e.DoubleSide,transparent:!0}),S=new e.Matrix4,x=new e.Vector3,b=new e.Vector3,F=[],_=new e.Vector3,C=new e.Mesh(new e.PlaneBufferGeometry(1,1).translate(.5,.5,0),U),T={type:"syncstart"},w={type:"synccomplete"},k=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],P=k.concat("material","color","depthOffset","clipRect","orientation","glyphGeometryDetail"),D=function(r){function e(){var e=new v;r.call(this,e,null),this.text="",this.anchorX=0,this.anchorY=0,this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.depthOffset=0,this.clipRect=null,this.orientation="+x+y",this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.debugSDF=!1}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={textRenderInfo:{configurable:!0},material:{configurable:!0},glyphGeometryDetail:{configurable:!0},customDepthMaterial:{configurable:!0},customDistanceMaterial:{configurable:!0}};return e.prototype.sync=function(r){var e=this;this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(r):(this._isSyncing=!0,this.dispatchEvent(T),f({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize},(function(t){e._isSyncing=!1,e._textRenderInfo=t,e.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.totalBounds,t.chunkedBounds,t.glyphColors);var a=e._queuedSyncs;a&&(e._queuedSyncs=null,e._needsSync=!0,e.sync((function(){a.forEach((function(r){return r&&r()}))}))),e.dispatchEvent(w),r&&r()}))))},e.prototype.onBeforeRender=function(){this.sync(),this._prepareForRender()},e.prototype.dispose=function(){this.geometry.dispose()},t.textRenderInfo.get=function(){return this._textRenderInfo||null},t.material.get=function(){var r=this._derivedMaterial,e=this._baseMaterial||U;return r&&r.baseMaterial===e||(r=this._derivedMaterial=m(e),e.addEventListener("dispose",(function t(){e.removeEventListener("dispose",t),r.dispose()}))),r},t.material.set=function(r){r&&r.isTroikaTextMaterial?(this._derivedMaterial=r,this._baseMaterial=r.baseMaterial):this._baseMaterial=r},t.glyphGeometryDetail.get=function(){return this.geometry.detail},t.glyphGeometryDetail.set=function(r){this.geometry.detail=r},t.customDepthMaterial.get=function(){return this.material.getDepthMaterial()},t.customDistanceMaterial.get=function(){return this.material.getDistanceMaterial()},e.prototype._prepareForRender=function(){var r=this._derivedMaterial,e=r.uniforms,t=this.textRenderInfo;if(t){var a=t.sdfTexture,n=t.totalBounds;e.uTroikaSDFTexture.value=a,e.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),e.uTroikaSDFGlyphSize.value=t.sdfGlyphSize,e.uTroikaSDFMinDistancePct.value=t.sdfMinDistancePercent,e.uTroikaTotalBounds.value.fromArray(n),e.uTroikaUseGlyphColors.value=!!t.glyphColors;var o=this.clipRect;o&&Array.isArray(o)&&4===o.length?e.uTroikaClipRect.value.set(Math.max(n[0],o[0]),Math.max(n[1],o[1]),Math.min(n[2],o[2]),Math.min(n[3],o[3])):e.uTroikaClipRect.value.fromArray(n),this.geometry.applyClipRect(e.uTroikaClipRect.value)}e.uTroikaSDFDebug.value=!!this.debugSDF,r.polygonOffset=!!this.depthOffset,r.polygonOffsetFactor=r.polygonOffsetUnits=this.depthOffset||0;var i=this.color;null!=i&&r.color&&r.color.isColor&&i!==r._troikaColor&&r.color.set(r._troikaColor=i);var s=this.orientation||"+x+y";if(s!==r._orientation){var h=e.uTroikaOrient.value,f="+x+y"!==(s=s.replace(/[^-+xyz]/g,""))&&s.match(/^([-+])([xyz])([-+])([xyz])$/);if(f){var u=f[1],l=f[2],d=f[3],c=f[4];x.set(0,0,0)[l]="-"===u?1:-1,b.set(0,0,0)[c]="-"===d?-1:1,S.lookAt(_,x.cross(b),b),h.setFromMatrix4(S)}else h.identity();r._orientation=s}},e.prototype.raycast=function(r,e){var t=this.textRenderInfo;if(t){var a=t.totalBounds;C.matrixWorld.multiplyMatrices(this.matrixWorld,S.set(a[2]-a[0],0,0,a[0],0,a[3]-a[1],0,a[1],0,0,1,0,0,0,0,1)),F.length=0,C.raycast(r,F);for(var n=0;n<F.length;n++)F[n].object=this,e.push(F[n])}},e.prototype.copy=function(e){var t=this;return r.prototype.copy.call(this,e),P.forEach((function(r){t[r]=e[r]})),this},e.prototype.clone=function(){return(new this.constructor).copy(this)},Object.defineProperties(e.prototype,t),e}(e.Mesh);k.forEach((function(r){var e="_private_"+r;Object.defineProperty(D.prototype,r,{get:function(){return this[e]},set:function(r){r!==this[e]&&(this[e]=r,this._needsSync=!0)}})}));var G=!1;Object.defineProperty(D.prototype,"anchor",{get:function(){return this._deprecated_anchor},set:function(r){this._deprecated_anchor=r,G||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),G=!0),Array.isArray(r)?(this.anchorX=100*(+r[0]||0)+"%",this.anchorY=100*(+r[1]||0)+"%"):this.anchorX=this.anchorY=0}});var M=new WeakMap,I=new WeakMap;r.GlyphsGeometry=v,r.Text=D,r.configureTextBuilder=function(r){u(i,r)},r.createTextDerivedMaterial=m,r.fontProcessorWorkerModule=l,r.getCaretAtPoint=function(r,e,t){var a=null,n=r.caretHeight,o=function(r){var e=I.get(r);if(!e){var t=r.caretPositions,a=r.caretHeight;e=new Map;for(var n=0;n<t.length;n+=3){var o=t[n+2],i=e.get(o);i||e.set(o,i=[]),i.push({x:t[n],y:o,height:a,charIndex:n/3}),n+3>=t.length&&i.push({x:t[n+1],y:o,height:a,charIndex:n/3+1})}}return I.set(r,e),e}(r),i=1/0;return o.forEach((function(r,e){Math.abs(t-(e+n/2))<Math.abs(t-(i+n/2))&&(i=e)})),o.get(i).forEach((function(r){(!a||Math.abs(e-r.x)<Math.abs(e-a.x))&&(a=r)})),a},r.getSelectionRects=function(r,e,t){var a;if(r){var n=M.get(r);if(n&&n.start===e&&n.end===t)return n.rects;var o=r.caretPositions,i=r.caretHeight,s=r.totalBounds;if(t<e){var h=e;e=t,t=h}e=Math.max(e,0),t=Math.min(t,o.length+1);for(var f=new Map,u=e;u<t;u++){var l=o[3*u],d=o[3*u+1],c=o[3*u+2],p=f.get(c);p?(p.left=Math.max(Math.min(p.left,l),s[0]),p.right=Math.min(Math.max(p.right,d),s[2])):(p={left:l,right:d,bottom:c,top:c+i},f.set(c,p))}a=[],f.forEach((function(r){a.push(r)})),M.set(r,{start:e,end:t,rects:a})}return a},r.preloadFont=function(r,e){var t=r.font,a=r.characters;f({font:t,sdfGlyphSize:r.sdfGlyphSize,text:Array.isArray(a)?a.join("\n"):""+a},e)},Object.defineProperty(r,"__esModule",{value:!0})}(e,t("Womt"),t("Wn9E"),t("4O1t"))}}]);
//# sourceMappingURL=2aab3bdc-7339d08b980b32f5ee00.js.map